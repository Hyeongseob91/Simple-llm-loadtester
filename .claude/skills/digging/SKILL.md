---
name: digging
description: 모호한 요구사항을 파고드는 대화형 워크플로우. "digging", "요구사항 정리", "뭐가 필요한지 정리", "PRD 작성", "뭘 원하는지 정리해줘" 등에 반응. AskUserQuestion도구로 3단계 객관식 질문을 통해 모호함을 제거하고 명확한 명세로 변환.
---

# Digging: 요구사항 파고들기 Skill

## 목적
모호한 요구사항 및 아이디어를 **단계별 질문**으로 파고들어 **PRD(Product Requirements Document)**로 변환합니다.

## 핵심 원칙
> "깊이 파고들수록 재작업이 줄어든다"

## 워크플로우

```
┌─────────────────────────────────────────────────────────────┐
│  1. 원본 요청 캡처                                           │
│     └─ 사용자가 말한 그대로 기록                              │
├─────────────────────────────────────────────────────────────┤
│  2. 기술 조사 (선택)                                         │
│     └─ 필요시 WebSearch로 Best Practice 확인                 │
├─────────────────────────────────────────────────────────────┤
│  3. AskUserQuestion으로 파고들기 (3라운드)                    │
│     └─ Round 1: 핵심 방향 (구현 위치, 방식)                   │
│     └─ Round 2: 세부 결정 (메트릭, 옵션, 처리 방식)            │
│     └─ Round 3: 예외/저장 (실패 처리, 출력, 저장 위치)         │
├─────────────────────────────────────────────────────────────┤
│  4. Before/After 요약                                        │
│     └─ 원본 → 명확화된 명세 테이블                            │
├─────────────────────────────────────────────────────────────┤
│  5. PRD 작성                                                 │
│     └─ 정형화된 PRD 템플릿으로 출력                           │
├─────────────────────────────────────────────────────────────┤
│  6. 저장 위치 확인                                           │
│     └─ AskUserQuestion으로 저장 경로 질문                     │
└─────────────────────────────────────────────────────────────┘
```

---

## Step 1: 원본 요청 캡처

```markdown
## 원본 요청 캡처

> "[사용자가 말한 그대로]"
```

---

## Step 2: 기술 조사 (선택적)

기술적 배경 지식이 필요하면 WebSearch를 먼저 수행합니다.

**조사가 필요한 경우:**
- 외부 시스템 연동 (vLLM metrics, Prometheus 등)
- Best Practice가 불명확한 경우
- 새로운 기술 스택 사용 시

**조사 후 요약:**
```markdown
### 기술 조사 결과
- [핵심 발견 1]
- [핵심 발견 2]
```

---

## Step 3: AskUserQuestion으로 파고들기

**반드시 AskUserQuestion 도구를 사용합니다.**

### 질문 규칙

| 규칙 | 설명 |
|------|------|
| 한 번에 2개 이하 | 질문 과부하 방지 |
| 이전 답변 반영 | 점진적 구체화 |
| 최대 3라운드 | 필요시 4라운드까지 |
| (Recommended) 표시 | 합리적 기본값 제안 |

### 라운드별 질문 전략

**Round 1: 핵심 방향**
- 구현 위치 (CLI, API, 자동 통합 등)
- 핵심 방식 (동기/비동기, 실시간/배치 등)

**Round 2: 세부 결정**
- 대상 범위 (어떤 메트릭, 어떤 데이터)
- 옵션/설정 (허용 오차, 타임아웃 등)

**Round 3: 예외 및 출력**
- 실패 처리 (에러, 경고, 스킵)
- 결과 저장 (포함, 별도 파일, 콘솔만)
- 저장 위치 (마지막에 반드시 질문)

---

## Step 4: Before/After 요약

```markdown
## Before (원본 요청)
> "[원본]"

## After (명확화된 명세)

| 항목 | 결정 사항 |
|------|----------|
| **구현 위치** | [답변] |
| **핵심 방식** | [답변] |
| **대상 범위** | [답변] |
| **실패 처리** | [답변] |
| **결과 저장** | [답변] |
```

---

## Step 5: PRD 작성

아래 템플릿을 사용하여 PRD를 작성합니다.

```markdown
# PRD: [기능명]

> **Version**: 1.0
> **Created**: YYYY-MM-DD
> **Status**: Draft

---

## 1. 개요

### 1.1 배경
[왜 이 기능이 필요한가]

### 1.2 목적
- [목적 1]
- [목적 2]

### 1.3 범위
| 포함 | 제외 |
|------|------|
| [포함 항목] | [제외 항목] |

---

## 2. 요구사항

### 2.1 기능 요구사항

| ID | 요구사항 | 우선순위 |
|----|---------|---------|
| FR-1 | [요구사항] | P0 |
| FR-2 | [요구사항] | P1 |

### 2.2 비기능 요구사항

| ID | 요구사항 | 기준 |
|----|---------|------|
| NFR-1 | [성능/보안 등] | [수치] |

---

## 3. 기술 설계

### 3.1 아키텍처
[다이어그램 또는 설명]

### 3.2 데이터 모델
[dataclass 또는 스키마]

### 3.3 파일 구조
[새로 생성/수정할 파일 목록]

---

## 4. 구현 계획

| Phase | 작업 | 복잡도 |
|-------|-----|--------|
| 1 | [작업] | 하/중/상 |

---

## 5. 성공 기준

- [ ] [검증 가능한 기준 1]
- [ ] [검증 가능한 기준 2]
```

---

## Step 6: 저장 위치 확인

**PRD 작성 후 반드시 저장 위치를 질문합니다.**

```
AskUserQuestion:
- "PRD를 어디에 저장할까요?"
  - docs/prd/[feature-name].md (기본)
  - 저장 없이 진행
```

---

## 트리거 키워드

```
/digging
파고들어
뭐가 필요한지 정리해줘
PRD 작성해줘
요구사항 정리
기능 명세화
```

---

## 도메인 특화 질문 (llm-loadtest)

이 프로젝트에서 자주 나오는 질문 패턴:

### 성능/메트릭 관련
| 모호한 표현 | 질문 | 선택지 |
|------------|------|--------|
| "메트릭 추가해줘" | 어떤 메트릭? | TTFT, Throughput, Latency, 커스텀 |
| "검증해줘" | 검증 방식? | 서버 메트릭 비교, 로그 분석, 수동 확인 |
| "모니터링" | 수집 방식? | Prometheus, 로깅, 실시간 WebSocket |

### API/CLI 관련
| 모호한 표현 | 질문 | 선택지 |
|------------|------|--------|
| "기능 추가" | 구현 위치? | CLI 명령어, API 엔드포인트, 자동 통합 |
| "옵션 추가" | 기본값? | 필수, 선택(기본값 있음), 환경변수 |
| "출력해줘" | 출력 형식? | JSON, 테이블, 콘솔 로그 |

### 에러/예외 관련
| 모호한 표현 | 질문 | 선택지 |
|------------|------|--------|
| "실패하면" | 처리 방식? | 에러로 중단, 경고만, 스킵 |
| "타임아웃" | 기본값? | 30초, 60초, 사용자 설정 |
| "재시도" | 횟수? | 없음, 3회, 무한(지수 백오프) |

---

## 주의사항

1. **질문 전 조사**: 기술적 배경이 필요하면 WebSearch 먼저
2. **저장 위치 필수 확인**: 임의로 경로 결정하지 않음
3. **(Recommended) 활용**: 합리적 기본값은 표시하되 강요하지 않음
4. **PRD 품질**: 구현 가능한 수준의 구체적 명세 작성
